(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b49c9c6"],{"03f9":function(t,s,e){"use strict";var i=e("82b6"),n=e.n(i);n.a},"16c0":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container"},[e("div",{staticStyle:{width:"800px"}},[e("welcome",{attrs:{task_list_undone_count:t.task_list_count,task_list_length:t.task_list.length}}),e("div",[e("el-input",{staticClass:"input-new-task",attrs:{placeholder:"快速添加今日待办事项","prefix-icon":"el-icon-plus"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.add_task(s)}},model:{value:t.new_task.title,callback:function(s){t.$set(t.new_task,"title",s)},expression:"new_task.title"}},[e("el-select",{staticStyle:{width:"150px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.new_task.checklist_id,callback:function(s){t.$set(t.new_task,"checklist_id",s)},expression:"new_task.checklist_id"}},t._l(t.checklist,(function(t,s){return e("el-option",{key:s,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t.task_list.length?e("div",t._l(t.task_list_sort,(function(s,i){return e("el-card",{key:i,staticClass:"box-card",attrs:{shadow:"hover"}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:1}},[e("div",{staticClass:"task-icon",on:{click:function(e){return t.change_task_status(s)}}},[s.status?e("span",[e("i",{staticClass:"el-icon-check"})]):e("span",[e("i",{staticClass:"el-icon-s-flag",attrs:{id:"live2d-flag"}})])])]),e("el-col",{attrs:{span:s.task_time?15:20}},[e("div",{class:{task_finished:s.status}},[t._v(" "+t._s(s.title)+" ")])]),e("el-col",{attrs:{span:s.task_time?5:0}},[e("div",{staticClass:"task-time"},[t._v(" "+t._s(s.task_time)+" ")])]),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"box-card__tool box-card__show"},[e("i",{staticClass:"el-icon-more",on:{click:function(e){return t.edit_task(s,i)}}}),e("i",{staticClass:"el-icon-document-copy",on:{click:function(e){return t.clip_task(s.title)}}}),e("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.delete_task(s)}}})])])],1)],1)})),1):e("div",{staticClass:"no-task"},[e("i",{staticClass:"el-icon-info"}),t._v(" 还没有待办事项呢 ")]),e("task-dialog",{attrs:{dialog:t.dialog,"task-info":t.target_task},on:{dialogchange:t.dialogchange,taskinfochange:t.taskinfochange}})],1)])},n=[],a=(e("4de4"),e("c740"),e("4160"),e("a434"),e("b64b"),e("159b"),e("b199")),c=e("5227"),l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wl-container"},[e("div",{staticClass:"wl-title"},[e("span",{staticClass:"wl-title-lg"},[t._v("今天")]),t._v(" 是"+t._s(t.time)+"，"+t._s(t.week)+"。 ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.task_list_length,expression:"task_list_length"}],staticClass:"wl-tip"},[e("span",{staticClass:"wl-tip__inner"},[t._v(" "+t._s(t.task_list_undone_count)+" / "+t._s(t.task_list_length)+" ")]),e("span",{staticClass:"wl-tip__inner2"},[t._v(" 还剩"+t._s(t.task_list_undone_count)+"个待办事项，共有 "+t._s(t.task_list_length)+"个待办事项 ")])])])},o=[],r=(e("a9e3"),{props:{task_list_length:{type:Number,default:function(){return 3}},task_list_undone_count:{type:Number,default:function(){return 2}}},data:function(){return{time:this.$moment().format("Y年MM月DD日"),week:this.$moment().format("dddd")}}}),_=r,u=(e("03f9"),e("2877")),k=Object(u["a"])(_,l,o,!1,null,"c4cf9b9c",null),d=k.exports,h=e("94c7"),f={components:{Welcome:d,taskDialog:h["a"]},data:function(){return{new_task:{title:"",content:"",cycle:"",checklist_id:"1"},task_list:[],dialog:!1,dialog_status:!0,target_task_index:0,target_task:{title:"",content:"",cycle:"0",task_time:""},checklist:[]}},methods:{fetch_data:function(){var t=this,s={date:this.$moment().format("Y-MM-DD")};Object(a["g"])(this.$store.getters.token,s).then((function(s){t.task_list=s.data})),Object(c["a"])(this.$store.getters.token).then((function(s){t.checklist=s.data,t.new_task.checklist_id=s.default_checklist_id}))},add_task:function(){var t=this;if(this.new_task.title){var s={title:this.new_task.title,content:this.new_task.content,add_time:this.$moment().format("Y-MM-DD"),checklist_id:this.new_task.checklist_id};Object(a["a"])(this.$store.getters.token,s).then((function(){t.fetch_data(),t.$notify({title:"系统通知",message:"添加待办事项成功",type:"success"}),Object.keys(t.new_task).forEach((function(s){return t.new_task[s]=""}))}))}else this.$notify({title:"系统通知",message:"待办事项名不可为空",type:"warning"})},clip_task:function(t){var s=this;this.$copyText(t).then((function(){s.$notify({title:"系统通知",message:"复制待办事项成功",type:"success"})}))},delete_task:function(t){var s=this;this.$confirm("此操作将删除该待办事项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["c"])(s.$store.getters.token,t.task_id).then((function(){s.task_list.splice(s.task_list.findIndex((function(s){return s.task_id===t.task_id})),1)})).then((function(){s.$notify({title:"系统通知",message:"删除待办事项成功",type:"success"})}))}))},change_task:function(t){var s={title:t.title,content:t.content,status:t.status,cycle:t.cycle,task_time:t.task_time};Object(a["b"])(this.$store.getters.token,t.task_id,s)},edit_task:function(t,s){this.target_task=JSON.parse(JSON.stringify(t)),this.target_task_index=s,this.dialog=!0,this.dialog_status=!1},change_task_status:function(t){this.task_list.forEach((function(s){s===t&&(s.status=!s.status)})),this.change_task(t),t.status?this.$notify({title:"系统通知",message:"完成待办事项成功",type:"success"}):this.$notify({title:"系统通知",message:"取消待办事项完成",type:"success"})},dialogchange:function(t){this.dialog=t,this.target_task={title:"",content:"",task_time:"",cycle:"0"}},taskinfochange:function(t){var s=this;this.task_list[this.target_task_index]=t,this.dialog_status?Object(a["a"])(this.$store.getters.token,t).then((function(){s.$notify({title:"系统通知",message:"添加成功",type:"success"})})):Object(a["b"])(this.$store.getters.token,t.task_id,t).then((function(){s.dialog_status=!0,s.$notify({title:"系统通知",message:"修改成功",type:"success"})}))}},created:function(){this.fetch_data()},computed:{task_list_sort:function(){return this.task_list.sort((function(t,s){return t.status!==s.status?t.status-s.status:t.task_id-s.task_id}))},task_list_count:function(){var t=this.task_list.filter((function(t){return!t.status}));return t.length}}},g=f,p=(e("40e2"),Object(u["a"])(g,i,n,!1,null,"00b6438e",null));s["default"]=p.exports},"40e2":function(t,s,e){"use strict";var i=e("8b6f"),n=e.n(i);n.a},"82b6":function(t,s,e){},"8b6f":function(t,s,e){},c740:function(t,s,e){"use strict";var i=e("23e7"),n=e("b727").findIndex,a=e("44d2"),c=e("ae40"),l="findIndex",o=!0,r=c(l);l in[]&&Array(1)[l]((function(){o=!1})),i({target:"Array",proto:!0,forced:o||!r},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a(l)}}]);
//# sourceMappingURL=chunk-3b49c9c6.9f9e88d1.js.map